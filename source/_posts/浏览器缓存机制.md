---
title: 浏览器缓存机制
date: 2017-04-06 20:27:27
tags:
- 前端
catalogies:
- 学习笔记
---

# 前言

面试提到了304状态码，被问到304出现的原因及浏览器缓存的机制。

<!--more-->

# 概况

浏览器缓存分两种机制：

- 强缓存
- 协商缓存

1. 浏览器第一次向服务器请求资源时，将获取到资源缓存到浏览器中，同时将 response header 一起缓存到浏览器中。

2. 浏览器需要再次请求相同的资源的时候，先从缓存中找到这个 response header 中查找 Expires 和 Cache-Control，分别对应了强缓存和协商缓存。

3. 若命中强缓存或协商缓存，则直接从浏览器缓存中获取资源。

4. 协商缓存优先于强缓存

# 强缓存与协商缓存的差异

1. 强缓存由HTTP header中的Expires控制，协商缓存由HTTP header中的Cache-Control控制。

2. Expires 格式为 Date，代表过期时间。Cache——Control则为`max-age=36000`的格式，以秒为单位。

3. 强缓存不会发送HTTP request， 而协商缓存会发送request，服务器会返回这个请求，但是不会返回数据。

4. Exprises 是HTTP1.0的事物，安全性不高，Cache-Control则为HTTP1.1中的事物。

# 关于304状态码

304状态码意义为Not Modified，即是命中了协商缓存，发送了请求，收到了响应，但是不包含资源，资源来自缓存未改变。

# 参考

- [浏览器缓存知识小结及应用](https://www.cnblogs.com/lyzg/p/5125934.html)
- [浏览器缓存机制](https://www.cnblogs.com/skynet/archive/2012/11/28/2792503.html)